[phases.setup]
nixPkgs = ["nodejs", "npm"]

[phases.install]
cmds = ["cd ../.. && npm install"]

[phases.build]
cmds = [
  "cd ../.. && npx prisma generate --schema=./packages/database/prisma/schema.prisma",
  "cd ../.. && npm run build --workspace=@juries/api-gateway",
  "ls -la /app/services/api-gateway/",
  "ls -la /app/services/api-gateway/dist/ || echo 'No dist directory'"
]

[start]
cmd = "cd ../.. && npm run start --workspace=@juries/api-gateway"
